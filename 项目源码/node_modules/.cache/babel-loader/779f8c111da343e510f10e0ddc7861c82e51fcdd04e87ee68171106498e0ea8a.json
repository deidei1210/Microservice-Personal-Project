{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createBlock as _createBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"map\"\n};\nconst _hoisted_2 = {\n  class: \"zoom-controls\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"weather-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_bm_label = _resolveComponent(\"bm-label\");\n  const _component_bm_marker = _resolveComponent(\"bm-marker\");\n  const _component_baidu_map = _resolveComponent(\"baidu-map\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" 用于显示地图 \"), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_baidu_map, {\n    class: \"map\",\n    center: {\n      lng: 121.474,\n      lat: 31.23\n    },\n    zoom: $data.zoom,\n    onClick: $options.handleMapClick\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 给特殊地点加上一些标注和说明 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.markers, (marker, index) => {\n      return _openBlock(), _createBlock(_component_bm_marker, {\n        key: index,\n        position: marker.position,\n        dragging: false,\n        onClick: $event => $options.toggleMarkerAnimation(index)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_bm_label, {\n          content: marker.content,\n          labelStyle: {\n            color: 'red',\n            fontSize: '15px'\n          },\n          offset: {\n            width: -35,\n            height: 30\n          }\n        }, null, 8 /* PROPS */, [\"content\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"position\", \"onClick\"]);\n    }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = (...args) => $options.zoomIn && $options.zoomIn(...args))\n    }, \"放大\"), _createElementVNode(\"button\", {\n      onClick: _cache[1] || (_cache[1] = (...args) => $options.zoomOut && $options.zoomOut(...args))\n    }, \"缩小\")])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"zoom\", \"onClick\"])]), _createCommentVNode(\" 用于显示天气 \"), $data.weatherData ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, \"城市：\" + _toDisplayString($data.weatherData.lives[0].city), 1 /* TEXT */), _createElementVNode(\"p\", null, \"温度：\" + _toDisplayString($data.weatherData.lives[0].temperature) + \"°C\", 1 /* TEXT */), _createElementVNode(\"p\", null, \"天气：\" + _toDisplayString($data.weatherData.lives[0].weather), 1 /* TEXT */), _createElementVNode(\"p\", null, \"湿度：\" + _toDisplayString($data.weatherData.lives[0].humidity) + \"%\", 1 /* TEXT */), _createElementVNode(\"p\", null, \"风向：\" + _toDisplayString($data.weatherData.lives[0].winddirection) + \"风\", 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createCommentVNode","_createElementVNode","_hoisted_1","_createVNode","_component_baidu_map","center","lng","lat","zoom","$data","onClick","$options","handleMapClick","_createElementBlock","_Fragment","_renderList","markers","marker","index","_createBlock","_component_bm_marker","key","position","dragging","$event","toggleMarkerAnimation","_component_bm_label","content","labelStyle","color","fontSize","offset","width","height","_hoisted_2","_cache","args","zoomIn","zoomOut","weatherData","_hoisted_3","_toDisplayString","lives","city","temperature","weather","humidity","winddirection"],"sources":["/Users/mac/Desktop/作业/微服务架构/Microservice-Personal-Project/src/components/map.vue"],"sourcesContent":["<template>\n  <!-- 用于显示地图 -->\n  <div class=\"map\">\n    <baidu-map\n      class=\"map\"\n      :center=\"{ lng: 121.474, lat: 31.23 }\"\n      :zoom=\"zoom\"\n      @click=\"handleMapClick\"\n    >\n      <!-- 给特殊地点加上一些标注和说明 -->\n      <bm-marker\n        v-for=\"(marker, index) in markers\"\n        :key=\"index\"\n        :position=\"marker.position\"\n        :dragging=\"false\"\n        @click=\"toggleMarkerAnimation(index)\"\n      >\n        <bm-label\n          :content=\"marker.content\"\n          :labelStyle=\"{ color: 'red', fontSize: '15px' }\"\n          :offset=\"{ width: -35, height: 30 }\"\n        ></bm-label>\n      </bm-marker>\n\n      <div class=\"zoom-controls\">\n        <button @click=\"zoomIn\">放大</button>\n        <button @click=\"zoomOut\">缩小</button>\n      </div>\n    </baidu-map>\n  </div>\n\n  <!-- 用于显示天气 -->\n  <div class=\"weather-container\" v-if=\"weatherData\">\n    <p>城市：{{ weatherData.lives[0].city }}</p>\n    <p>温度：{{ weatherData.lives[0].temperature }}°C</p>\n    <p>天气：{{ weatherData.lives[0].weather }}</p>\n    <p>湿度：{{ weatherData.lives[0].humidity }}%</p>\n    <p>风向：{{ weatherData.lives[0].winddirection }}风</p>\n    \n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport {\n  BaiduMap,\n  BmWalking,\n  BmInfoWindow,\n  BmBoundary,\n  BmScale,\n  BmMarker,\n  BmLabel,\n} from \"vue-baidu-map-3x\";\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\n\nexport default {\n  components: {\n    BaiduMap,\n    BmWalking,\n    BmInfoWindow,\n    BmBoundary,\n    BmScale,\n    BmMarker,\n    BmLabel,\n  },\n  data() {\n    return {\n      center: { lat: 39.9, lng: 116.4 },\n      zoom: 15,\n      //一些景点坐标点\n      markers: [\n        {\n          position: { lng: 121.4912, lat: 31.2438 },\n          content: \"南京东路\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4811, lat: 31.2346 },\n          content: \"人民广场\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5073, lat: 31.2437 },\n          content: \"陆家嘴\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4972, lat: 31.2429 },\n          content: \"外滩\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4972, lat: 31.2489 },\n          content: \"外白渡桥\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4896, lat: 31.2482 },\n          content: \"乍浦路桥\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4943, lat: 31.2343 },\n          content: \"豫园\",\n          show: false,\n        },\n        {\n          position: { lng: 121.483, lat: 31.2342 },\n          content: \"上海博物馆\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4746, lat: 31.2266 },\n          content: \"淮海中路\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5083, lat: 31.2469 },\n          content: \"东方明珠\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4526, lat: 31.2292 },\n          content: \"静安寺\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4449, lat: 31.211 },\n          content: \"武康大楼\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4455, lat: 31.2102 },\n          content: \"宋庆龄故居\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4427, lat: 31.2015 },\n          content: \"徐家汇\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4759, lat: 31.2139 },\n          content: \"田子坊\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4812, lat: 31.2229 },\n          content: \"中共一大会址\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5076, lat: 31.2132 },\n          content: \"南浦大桥\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4691, lat: 31.2424 },\n          content: \"上海自然博物馆\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4761, lat: 31.2199 },\n          content: \"思南公馆\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4761, lat: 31.2199 },\n          content: \"四川北路\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4761, lat: 31.2199 },\n          content: \"思南公馆\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4899, lat: 31.2776 },\n          content: \"鲁迅公园\",\n          show: false,\n        },\n        {\n          position: { lng: 121.4908, lat: 31.2581 },\n          content: \"四川北路\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5055, lat: 31.2529 },\n          content: \"北外滩\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5331, lat: 31.2561 },\n          content: \"杨浦滨江\",\n          show: false,\n        },\n        {\n          position: { lng: 121.49, lat: 31.2711 },\n          content: \"甜爱路\",\n          show: false,\n        },\n        {\n          position: { lng: 121.488, lat: 31.2696 },\n          content: \"多伦路文化名人街\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5088, lat: 31.2888 },\n          content: \"同济大学\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5055, lat: 31.2529 },\n          content: \"北外滩\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5055, lat: 31.2529 },\n          content: \"北外滩\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5055, lat: 31.2529 },\n          content: \"北外滩\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5055, lat: 31.2529 },\n          content: \"北外滩\",\n          show: false,\n        },\n        {\n          position: { lng: 121.5055, lat: 31.2529 },\n          content: \"北外滩\",\n          show: false,\n        },\n      ],\n      weatherData: null, //存储天气数据\n      city: \"310000\", //上海\n      selectedMarkerIndex: -1, // 记录选中的标记索引\n    };\n  },\n  created() {\n    this.getWeatherData();\n    this.searchWiki(\"上海\");\n    console.log(this.weatherData);\n  },\n  mounted() {\n    this.mapInstance = this.$refs.map ? this.$refs.map.getMap() : null;\n    this.getWeatherData();\n  },\n  methods: {\n    //通过点击地图上的点获得该点具体的地点名称\n    handleMapClick(event) {\n      const point = new BMap.Point(event.point.lng, event.point.lat);\n      const geoc = new BMap.Geocoder();\n\n      // 调用百度地图 API 的逆地理编码方法获取地名\n      geoc.getLocation(point, (result) => {\n        if (result) {\n          const address = result.address; // 地名\n          const lng = result.point.lng; // 经度\n          const lat = result.point.lat; // 纬度\n\n          // 处理获取到的地名、经纬度数据\n          console.log(\"地名:\", address);\n          console.log(\"经度:\", lng);\n          console.log(\"纬度:\", lat);\n        }\n      });\n    },\n    //放大地图\n    zoomIn() {\n      this.zoom += 1; // 放大地图缩放级别\n      // this.$refs.baiduMap.setZoom(this.zoom); // 调用 setZoom 方法更新地图缩放级别\n    },\n    //缩小地图\n    zoomOut() {\n      this.zoom -= 1; // 缩小地图缩放级别\n      // this.$refs.baiduMap.setZoom(this.zoom); // 调用 setZoom 方法更新地图缩放级别\n    },\n    //调用天气api，已经可以调取成功\n    getWeatherData() {\n      const key = \"\t3f6157ccb2e4ec191a030932e211ffaa\"; // 将 `your key` 替换成你的高德开发者key\n      const url = `https://restapi.amap.com/v3/weather/weatherInfo?key=${key}&city=${this.city}`;\n      console.log(\"获取天气\");\n      axios\n        .get(url)\n        .then((response) => {\n          if (response.status === 200) {\n            this.weatherData = response.data;\n            console.log(response.data);\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    //调用Wiki百科API\n    async searchWiki(keyword) {\n      try {\n        const response = await axios.get(\"https://zh.wikipedia.org/w/api.php\", {\n          params: {\n            format: \"json\",\n            action: \"query\",\n            generator: \"search\",\n            gsrnamespace: 0,\n            gsrlimit: 10,\n            prop: \"pageimages|extracts\",\n            pilimit: \"max\",\n            exintro: true,\n            explaintext: true,\n            exsentences: 1,\n            exlimit: \"max\",\n            origin: \"*\",\n            gsrsearch: \"上海南京东路\",\n          },\n        });\n        console.log(response.data.query.pages);\n      } catch (error) {\n        console.error(\"Error:\", error);\n      }\n    },\n    //点击标记物之后标记开始跳动\n    toggleMarkerAnimation(index) {\n      if (!this.mapInstance) return; // 地图未初始化，不进行操作\n\n      this.selectedMarkerIndex = index; // 更新选中的标记索引\n\n      this.markers.forEach((marker, i) => {\n        if (i === index) {\n          marker.marker.setAnimation(BMAP_ANIMATION_BOUNCE); // 设置BOUNCE动画\n        } else {\n          marker.marker.setAnimation(null); // 取消动画\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style>\n.map {\n  width: 70%;\n  height: 950px;\n}\n.zoom-controls {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  z-index: 9999;\n}\n.weather-container {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  z-index: 9999;\n  /* 添加其他样式 */\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAK;;EAsBPA,KAAK,EAAC;AAAe;;;EAQzBA,KAAK,EAAC;;;;;;6DA/BXC,mBAAA,YAAe,EACfC,mBAAA,CA2BM,OA3BNC,UA2BM,GA1BJC,YAAA,CAyBYC,oBAAA;IAxBVL,KAAK,EAAC,KAAK;IACVM,MAAM,EAAE;MAAAC,GAAA;MAAAC,GAAA;IAAA,CAA4B;IACpCC,IAAI,EAAEC,KAAA,CAAAD,IAAI;IACVE,OAAK,EAAEC,QAAA,CAAAC;;sBAER,MAAuB,CAAvBZ,mBAAA,oBAAuB,G,kBACvBa,mBAAA,CAYYC,SAAA,QAAAC,WAAA,CAXgBN,KAAA,CAAAO,OAAO,GAAzBC,MAAM,EAAEC,KAAK;2BADvBC,YAAA,CAYYC,oBAAA;QAVTC,GAAG,EAAEH,KAAK;QACVI,QAAQ,EAAEL,MAAM,CAACK,QAAQ;QACzBC,QAAQ,EAAE,KAAK;QACfb,OAAK,EAAAc,MAAA,IAAEb,QAAA,CAAAc,qBAAqB,CAACP,KAAK;;0BAEnC,MAIY,CAJZf,YAAA,CAIYuB,mBAAA;UAHTC,OAAO,EAAEV,MAAM,CAACU,OAAO;UACvBC,UAAU,EAAE;YAAAC,KAAA;YAAAC,QAAA;UAAA,CAAkC;UAC9CC,MAAM,EAAE;YAAAC,KAAA;YAAAC,MAAA;UAAA;;;;oCAIbhC,mBAAA,CAGM,OAHNiC,UAGM,GAFJjC,mBAAA,CAAmC;MAA1BS,OAAK,EAAAyB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEzB,QAAA,CAAA0B,MAAA,IAAA1B,QAAA,CAAA0B,MAAA,IAAAD,IAAA,CAAM;OAAE,IAAE,GAC1BnC,mBAAA,CAAoC;MAA3BS,OAAK,EAAAyB,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEzB,QAAA,CAAA2B,OAAA,IAAA3B,QAAA,CAAA2B,OAAA,IAAAF,IAAA,CAAO;OAAE,IAAE,E;;4CAKjCpC,mBAAA,YAAe,EACsBS,KAAA,CAAA8B,WAAW,I,cAAhD1B,mBAAA,CAOM,OAPN2B,UAOM,GANJvC,mBAAA,CAAyC,WAAtC,KAAG,GAAAwC,gBAAA,CAAGhC,KAAA,CAAA8B,WAAW,CAACG,KAAK,IAAIC,IAAI,kBAClC1C,mBAAA,CAAkD,WAA/C,KAAG,GAAAwC,gBAAA,CAAGhC,KAAA,CAAA8B,WAAW,CAACG,KAAK,IAAIE,WAAW,IAAG,IAAE,iBAC9C3C,mBAAA,CAA4C,WAAzC,KAAG,GAAAwC,gBAAA,CAAGhC,KAAA,CAAA8B,WAAW,CAACG,KAAK,IAAIG,OAAO,kBACrC5C,mBAAA,CAA8C,WAA3C,KAAG,GAAAwC,gBAAA,CAAGhC,KAAA,CAAA8B,WAAW,CAACG,KAAK,IAAII,QAAQ,IAAG,GAAC,iBAC1C7C,mBAAA,CAAmD,WAAhD,KAAG,GAAAwC,gBAAA,CAAGhC,KAAA,CAAA8B,WAAW,CAACG,KAAK,IAAIK,aAAa,IAAG,GAAC,gB"},"metadata":{},"sourceType":"module","externalDependencies":[]}