{"ast":null,"code":"export default {\n  data() {\n    return {\n      steps: []\n    };\n  },\n  mounted() {\n    this.initMap();\n  },\n  methods: {\n    initMap() {\n      //初始化地图\n      const map = new TMap.Map('mapContainer', {\n        center: new TMap.LatLng(31.242497, 121.488892),\n        zoom: 14\n      });\n      let lat = 31.242497;\n      let lng = 121.488892;\n\n      //绑定点击事件，获取纬度和经度\n      map.on('click', evt => {\n        //获取纬度\n        lat = evt.latLng.getLat().toFixed(6);\n        //获取经度\n        lng = evt.latLng.getLng().toFixed(6);\n      });\n      const startPosition = new TMap.LatLng(lat, lng); // 路线规划起点\n      const endPosition = new TMap.LatLng(31.296605, 121.506377); // 路线规划终点\n      const marker = new TMap.MultiMarker({\n        id: 'marker-layer',\n        map: map,\n        styles: {\n          start: new TMap.MarkerStyle({\n            width: 25,\n            height: 35,\n            anchor: {\n              x: 16,\n              y: 32\n            },\n            src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/start.png'\n          }),\n          end: new TMap.MarkerStyle({\n            width: 25,\n            height: 35,\n            anchor: {\n              x: 16,\n              y: 32\n            },\n            src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/end.png'\n          })\n        },\n        geometries: [{\n          id: 'start',\n          styleId: 'start',\n          position: startPosition\n        }, {\n          id: 'end',\n          styleId: 'end',\n          position: endPosition\n        }]\n      });\n      const driving = new TMap.service.Driving({\n        mp: false,\n        policy: 'PICKUP,NAV_POINT_FIRST'\n      });\n      driving.search({\n        from: startPosition,\n        to: endPosition\n      }).then(result => {\n        this.steps = result.result.routes[0].steps;\n        this.displayPolyline(result.result.routes[0].polyline);\n      });\n    },\n    displayPolyline(pl) {\n      const polylineLayer = new TMap.MultiPolyline({\n        id: 'polyline-layer',\n        map: map,\n        styles: {\n          style_blue: new TMap.PolylineStyle({\n            color: '#3777FF',\n            width: 8,\n            borderWidth: 5,\n            borderColor: '#FFF',\n            lineCap: 'round'\n          })\n        },\n        geometries: [{\n          id: 'pl_1',\n          styleId: 'style_blue',\n          paths: pl\n        }]\n      });\n    }\n  }\n};","map":{"version":3,"names":["data","steps","mounted","initMap","methods","map","TMap","Map","center","LatLng","zoom","lat","lng","on","evt","latLng","getLat","toFixed","getLng","startPosition","endPosition","marker","MultiMarker","id","styles","start","MarkerStyle","width","height","anchor","x","y","src","end","geometries","styleId","position","driving","service","Driving","mp","policy","search","from","to","then","result","routes","displayPolyline","polyline","pl","polylineLayer","MultiPolyline","style_blue","PolylineStyle","color","borderWidth","borderColor","lineCap","paths"],"sources":["/Users/mac/Desktop/作业/微服务架构/your-project-name/src/components/map.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"mapContainer\"></div>\n    <div id=\"panel\">\n      <p>请在右侧示例代码第10行填入您的key，并执行查看运行结果（key可在控制台应用管理中自行创建）</p>\n      <h4>驾车路线规划</h4>\n      <div id=\"instruction\">\n        <p v-for=\"(step, index) in steps\" :key=\"index\">{{ index + 1 }}. {{ step.instruction }}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      steps: [],\n    };\n  },\n  mounted() {\n    this.initMap();\n  },\n  methods: {\n    initMap() {\n      //初始化地图\n      const map = new TMap.Map('mapContainer', {\n        center: new TMap.LatLng(31.242497, 121.488892),\n        zoom: 14,\n      });\n      let lat = 31.242497;\n      let lng = 121.488892;\n\n      //绑定点击事件，获取纬度和经度\n      map.on('click', (evt) => {\n        //获取纬度\n        lat = evt.latLng.getLat().toFixed(6);\n        //获取经度\n        lng = evt.latLng.getLng().toFixed(6);\n      });\n\n      const startPosition = new TMap.LatLng(lat, lng); // 路线规划起点\n      const endPosition = new TMap.LatLng(31.296605, 121.506377); // 路线规划终点\n      const marker = new TMap.MultiMarker({\n        id: 'marker-layer',\n        map: map,\n        styles: {\n          start: new TMap.MarkerStyle({\n            width: 25,\n            height: 35,\n            anchor: { x: 16, y: 32 },\n            src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/start.png',\n          }),\n          end: new TMap.MarkerStyle({\n            width: 25,\n            height: 35,\n            anchor: { x: 16, y: 32 },\n            src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/end.png',\n          }),\n        },\n        geometries: [\n          {\n            id: 'start',\n            styleId: 'start',\n            position: startPosition,\n          },\n          {\n            id: 'end',\n            styleId: 'end',\n            position: endPosition,\n          },\n        ],\n      });\n\n      const driving = new TMap.service.Driving({\n        mp: false,\n        policy: 'PICKUP,NAV_POINT_FIRST',\n      });\n      driving.search({ from: startPosition, to: endPosition }).then((result) => {\n        this.steps = result.result.routes[0].steps;\n        this.displayPolyline(result.result.routes[0].polyline);\n      });\n    },\n    displayPolyline(pl) {\n      const polylineLayer = new TMap.MultiPolyline({\n        id: 'polyline-layer',\n        map: map,\n        styles: {\n          style_blue: new TMap.PolylineStyle({\n            color: '#3777FF',\n            width: 8,\n            borderWidth: 5,\n            borderColor: '#FFF',\n            lineCap: 'round',\n          }),\n        },\n        geometries: [\n          {\n            id: 'pl_1',\n            styleId: 'style_blue',\n            paths: pl,\n          },\n        ],\n      });\n    },\n  },\n};\n</script>\n\n<style>\nhtml,\nbody {\n  height: 100%;\n  margin: 0px;\n  padding: 0px;\n}\n\n#mapContainer {\n  width: 100%;\n  height: 100%;\n}\n\n#panel {\n  position: absolute;\n  background: #FFF;\n  width: 350px;\n  padding: 20px;\n  z-index: 9999;\n  top: 30px;\n  left: 30px;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}